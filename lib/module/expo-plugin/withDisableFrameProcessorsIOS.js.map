{"version":3,"names":["withXcodeProject","withDisableFrameProcessorsIOS","c","config","xcodeProject","modResults","configurations","pbxXCBuildConfigurationSection","inheritKey","valueKey","key","buildSettings","preprocessorDefinitions","GCC_PREPROCESSOR_DEFINITIONS","includes","push"],"sources":["withDisableFrameProcessorsIOS.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport { ConfigPlugin, withXcodeProject, XcodeProject } from '@expo/config-plugins';\n\n/**\n * Set the `disableFrameProcessors` inside of the XcodeProject.\n * This is used to disable frame processors if you don't need it on iOS. (will save CPU and Memory)\n */\nexport const withDisableFrameProcessorsIOS: ConfigPlugin = (c) => {\n  return withXcodeProject(c, (config) => {\n    const xcodeProject: XcodeProject = config.modResults;\n\n    const configurations = xcodeProject.pbxXCBuildConfigurationSection();\n\n    const inheritKey = '\"$(inherited)\"';\n    const valueKey = '\"VISION_CAMERA_DISABLE_FRAME_PROCESSORS=1\"';\n\n    for (const key in configurations) {\n      const buildSettings = configurations[key].buildSettings;\n      if (buildSettings == null) continue;\n\n      const preprocessorDefinitions = (buildSettings.GCC_PREPROCESSOR_DEFINITIONS ?? [inheritKey]) as string[];\n\n      if (!preprocessorDefinitions.includes(valueKey)) preprocessorDefinitions.push(valueKey);\n      buildSettings.GCC_PREPROCESSOR_DEFINITIONS = preprocessorDefinitions;\n    }\n    return config;\n  });\n};\n"],"mappings":"AAAA;AACA,SAAuBA,gBAAvB,QAA6D,sBAA7D;AAEA;AACA;AACA;AACA;;AACA,OAAO,MAAMC,6BAA2C,GAAIC,CAAD,IAAO;EAChE,OAAOF,gBAAgB,CAACE,CAAD,EAAKC,MAAD,IAAY;IACrC,MAAMC,YAA0B,GAAGD,MAAM,CAACE,UAA1C;IAEA,MAAMC,cAAc,GAAGF,YAAY,CAACG,8BAAb,EAAvB;IAEA,MAAMC,UAAU,GAAG,gBAAnB;IACA,MAAMC,QAAQ,GAAG,4CAAjB;;IAEA,KAAK,MAAMC,GAAX,IAAkBJ,cAAlB,EAAkC;MAChC,MAAMK,aAAa,GAAGL,cAAc,CAACI,GAAD,CAAd,CAAoBC,aAA1C;MACA,IAAIA,aAAa,IAAI,IAArB,EAA2B;MAE3B,MAAMC,uBAAuB,GAAID,aAAa,CAACE,4BAAd,IAA8C,CAACL,UAAD,CAA/E;MAEA,IAAI,CAACI,uBAAuB,CAACE,QAAxB,CAAiCL,QAAjC,CAAL,EAAiDG,uBAAuB,CAACG,IAAxB,CAA6BN,QAA7B;MACjDE,aAAa,CAACE,4BAAd,GAA6CD,uBAA7C;IACD;;IACD,OAAOT,MAAP;EACD,CAlBsB,CAAvB;AAmBD,CApBM"}