{"version":3,"names":["pkg","require","CAMERA_USAGE","MICROPHONE_USAGE","withCamera","config","props","ios","infoPlist","NSCameraUsageDescription","cameraPermissionText","enableMicrophonePermission","NSMicrophoneUsageDescription","microphonePermissionText","androidPermissions","push","disableFrameProcessors","withDisableFrameProcessorsAndroid","withDisableFrameProcessorsIOS","withPlugins","AndroidConfig","Permissions","withPermissions","createRunOncePlugin","name","version"],"sources":["withVisionCamera.ts"],"sourcesContent":["import { withPlugins, AndroidConfig, ConfigPlugin, createRunOncePlugin } from '@expo/config-plugins';\nimport { withDisableFrameProcessorsAndroid } from './withDisableFrameProcessorsAndroid';\nimport { withDisableFrameProcessorsIOS } from './withDisableFrameProcessorsIOS';\n// eslint-disable-next-line @typescript-eslint/no-var-requires, @typescript-eslint/no-unsafe-assignment\nconst pkg = require('../../../package.json');\n\nconst CAMERA_USAGE = 'Allow $(PRODUCT_NAME) to access your camera';\nconst MICROPHONE_USAGE = 'Allow $(PRODUCT_NAME) to access your microphone';\n\ntype Props = {\n  cameraPermissionText?: string;\n  enableMicrophonePermission?: boolean;\n  microphonePermissionText?: string;\n  disableFrameProcessors?: boolean;\n};\n\nconst withCamera: ConfigPlugin<Props> = (config, props = {}) => {\n  if (config.ios == null) config.ios = {};\n  if (config.ios.infoPlist == null) config.ios.infoPlist = {};\n  config.ios.infoPlist.NSCameraUsageDescription =\n    props.cameraPermissionText ?? (config.ios.infoPlist.NSCameraUsageDescription as string | undefined) ?? CAMERA_USAGE;\n  if (props.enableMicrophonePermission) {\n    config.ios.infoPlist.NSMicrophoneUsageDescription =\n      props.microphonePermissionText ?? (config.ios.infoPlist.NSMicrophoneUsageDescription as string | undefined) ?? MICROPHONE_USAGE;\n  }\n  const androidPermissions = ['android.permission.CAMERA'];\n  if (props.enableMicrophonePermission) androidPermissions.push('android.permission.RECORD_AUDIO');\n\n  if (props.disableFrameProcessors) {\n    config = withDisableFrameProcessorsAndroid(config);\n    config = withDisableFrameProcessorsIOS(config);\n  }\n\n  return withPlugins(config, [[AndroidConfig.Permissions.withPermissions, androidPermissions]]);\n};\n\nexport default createRunOncePlugin(withCamera, pkg.name, pkg.version);\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;AACA,MAAMA,GAAG,GAAGC,OAAO,CAAC,uBAAD,CAAnB;;AAEA,MAAMC,YAAY,GAAG,6CAArB;AACA,MAAMC,gBAAgB,GAAG,iDAAzB;;AASA,MAAMC,UAA+B,GAAG,UAACC,MAAD,EAAwB;EAAA,IAAfC,KAAe,uEAAP,EAAO;EAC9D,IAAID,MAAM,CAACE,GAAP,IAAc,IAAlB,EAAwBF,MAAM,CAACE,GAAP,GAAa,EAAb;EACxB,IAAIF,MAAM,CAACE,GAAP,CAAWC,SAAX,IAAwB,IAA5B,EAAkCH,MAAM,CAACE,GAAP,CAAWC,SAAX,GAAuB,EAAvB;EAClCH,MAAM,CAACE,GAAP,CAAWC,SAAX,CAAqBC,wBAArB,GACEH,KAAK,CAACI,oBAAN,IAA+BL,MAAM,CAACE,GAAP,CAAWC,SAAX,CAAqBC,wBAApD,IAAuGP,YADzG;;EAEA,IAAII,KAAK,CAACK,0BAAV,EAAsC;IACpCN,MAAM,CAACE,GAAP,CAAWC,SAAX,CAAqBI,4BAArB,GACEN,KAAK,CAACO,wBAAN,IAAmCR,MAAM,CAACE,GAAP,CAAWC,SAAX,CAAqBI,4BAAxD,IAA+GT,gBADjH;EAED;;EACD,MAAMW,kBAAkB,GAAG,CAAC,2BAAD,CAA3B;EACA,IAAIR,KAAK,CAACK,0BAAV,EAAsCG,kBAAkB,CAACC,IAAnB,CAAwB,iCAAxB;;EAEtC,IAAIT,KAAK,CAACU,sBAAV,EAAkC;IAChCX,MAAM,GAAG,IAAAY,oEAAA,EAAkCZ,MAAlC,CAAT;IACAA,MAAM,GAAG,IAAAa,4DAAA,EAA8Bb,MAA9B,CAAT;EACD;;EAED,OAAO,IAAAc,0BAAA,EAAYd,MAAZ,EAAoB,CAAC,CAACe,4BAAA,CAAcC,WAAd,CAA0BC,eAA3B,EAA4CR,kBAA5C,CAAD,CAApB,CAAP;AACD,CAlBD;;eAoBe,IAAAS,kCAAA,EAAoBnB,UAApB,EAAgCJ,GAAG,CAACwB,IAApC,EAA0CxB,GAAG,CAACyB,OAA9C,C"}